"use strict";var l=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var v=Object.prototype.hasOwnProperty;var C=(o,e)=>{for(var n in e)l(o,n,{get:e[n],enumerable:!0})},D=(o,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of g(e))!v.call(o,a)&&a!==n&&l(o,a,{get:()=>e[a],enumerable:!(i=M(e,a))||i.enumerable});return o};var y=o=>D(l({},"__esModule",{value:!0}),o);var B={};C(B,{default:()=>E});module.exports=y(B);var c=require("../lib/client"),t=require("discord.js"),m=require("../env"),f=require("../lib/logger"),u=require("../loaders/slashCommands"),d=require("../lib/symbols"),p=require("../lib/loader");function E(o){const e=Reflect.getMetadata(d.BotModuleLoader,o),n=c.DiscordClient.getInstance({intents:[t.GatewayIntentBits.Guilds,t.GatewayIntentBits.GuildMessages,t.GatewayIntentBits.MessageContent,t.GatewayIntentBits.GuildMembers,t.GatewayIntentBits.GuildModeration]}),i=new t.REST({version:"10"}).setToken(m.env.DISCORD_TOKEN),a=new o;(async()=>{try{a.onMount();const{slashCommands:r,slashConfigs:s}=await(0,u.loadSlashCommands)(),R=await i.put(t.Routes.applicationCommands(m.env.DISCORD_APP_ID),{body:r});n.slashConfigs=s,n.login(m.env.DISCORD_TOKEN)}catch(r){f.Logger.error(`Error refreshing application (/) commands: 
	${r}`)}})(),e.EventModule.forEach(r=>{const s=Reflect.getMetadata(d.EventModuleEvent,r);switch(s.Event){case"MessageCreate":n.on(t.Events.MessageCreate,(0,p.loadEvent)(r));break;default:n.on(t.Events[s.Event],s.Handler)}})}
